<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>SELLPHONE - Reserve Product</title>

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Roboto:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Work+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <script>
    // Function to delete a reserved item from local storage
    function deleteItem(index) {
      // Retrieve reservations from local storage
      const reservations = JSON.parse(localStorage.getItem('reservations')) || [];

      // Remove the item at the specified index
      reservations.splice(index, 1);

      // Update local storage with the modified reservations
      localStorage.setItem('reservations', JSON.stringify(reservations));

      // Refresh the page to reflect the changes
      location.reload();
    }

    // Function to update reserve date and quantity
    function updateItem(index) {
      // Retrieve reservations from local storage
      const reservations = JSON.parse(localStorage.getItem('reservations')) || [];

      // Prompt the user to enter a new reserve date
      const newDate = prompt('Enter new reserve date (YYYY-MM-DD):');

      // Prompt the user to enter a new quantity
      const newQuantity = prompt('Enter new quantity:');

      // Update the reservation at the specified index
      if (newDate && newQuantity) {
        reservations[index].claimDate = newDate;
        reservations[index].phoneCount = newQuantity;

        // Update local storage with the modified reservations
        localStorage.setItem('reservations', JSON.stringify(reservations));

        // Refresh the page to reflect the changes
        location.reload();
      }
    }

    // Function to open the editing container
    function openEditContainer(index) {
      // Retrieve reservations from local storage
      const reservations = JSON.parse(localStorage.getItem('reservations')) || [];

      // Get the reservation at the specified index
      const reservation = reservations[index];

      // Display the editing container
      const editContainer = document.getElementById('editContainer');
      editContainer.style.display = 'block';

      // Populate the editing container with the reservation details
     
      document.getElementById('editQuantity').value = reservation.phoneCount;
      document.getElementById('editDate').value = reservation.claimDate;

      // Set the index as a data attribute for later use
      editContainer.setAttribute('data-index', index);
    }

    // Function to save edited data
    function saveEditedData() {
      // Retrieve reservations from local storage
      const reservations = JSON.parse(localStorage.getItem('reservations')) || [];

      // Retrieve the index from the data attribute
      const index = parseInt(document.getElementById('editContainer').getAttribute('data-index'));

      // Update the reservation with edited data

      reservations[index].phoneCount = document.getElementById('editQuantity').value;
      reservations[index].claimDate = document.getElementById('editDate').value;

      // Update local storage with the modified reservations
      localStorage.setItem('reservations', JSON.stringify(reservations));

      // Hide the editing container
      document.getElementById('editContainer').style.display = 'none';

      // Refresh the page to reflect the changes
      location.reload();
    }
  </script>
  <!-- Custom Styles -->
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .reserved-item {
      border-bottom: 1px solid #ddd;
      padding: 15px 0;
      display: flex;
      align-items: center;
    }

    .reserved-item img {
      max-width: 100px;
      margin-right: 20px;
    }

    .item-details {
      flex: 1;
    }

    .total {
      text-align: right;
      font-weight: bold;
    }

    /* Styles for the editing container */
    #editContainer {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }

    /* Close button for the editing container */
    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
    }
  </style>
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <h1>SELLPHONE<span>.</span></h1>
      </a>

      <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
      <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
      <nav id="navbar" class="navbar">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="contact.html">About</a></li>
          <li><a href="products.html">Products</a></li>
          <li><a href="reserved.html">Reserved</a></li>
          <li><a href="login.html">Login</a></li>
        </ul>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs d-flex align-items-center"
      style="background-image: url('assets/img/breadcrumbs-bg.jpg');">
      <div class="container position-relative d-flex flex-column align-items-center" data-aos="fade">

        <h2>Specifications</h2>
        <ol>
          <li><a href="index.html">Home</a></li>
          <li>Phone Details</li>
        </ol>

      </div>
    </div><!-- End Breadcrumbs -->

    <!-- ======= Shopping Cart Section ======= -->
    <section id="shopping-cart" class="shopping-cart">
      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <!-- Retrieve reserved items from local storage -->
        <div id="reservedItems">
          <script>
            document.addEventListener('DOMContentLoaded', function () {
              const reservations = JSON.parse(localStorage.getItem('reservations')) || [];
              const reservedItemsContainer = document.getElementById('reservedItems');

              reservations.forEach((reservation, index) => {
                const reservedItem = document.createElement('div');
                reservedItem.classList.add('reserved-item');

                const image = document.createElement('img');
                image.src = reservation.image;
                image.alt = reservation.model;
                reservedItem.appendChild(image);

                const itemDetails = document.createElement('div');
                itemDetails.classList.add('item-details');

                const details = `
        <h4>${reservation.brand} ${reservation.model}</h4>
        <p>Price: ₱${reservation.price}</p>
        <p>Ram: ${reservation.ram}</p>
        <p>Storage: ${reservation.storage}</p>
        <p>Color: ${reservation.color}</p>
        <p>Quantity: ${reservation.phoneCount}</p>
        <p>Claim Date: ${reservation.claimDate}</p>
        <div>
          <button onclick="deleteItem(${index})">Delete</button>
          <button onclick="openEditContainer(${index})">Edit</button>
        </div>
      `;
                itemDetails.innerHTML = details;

                reservedItem.appendChild(itemDetails);
                reservedItemsContainer.appendChild(reservedItem);
              });

              // Display total
              const totalContainer = document.createElement('div');
              totalContainer.classList.add('total');

              // Calculate total price
              const totalPrice = reservations.reduce((acc, reservation) => acc + (parseInt(reservation.price) * parseInt(reservation.phoneCount)), 0);

              totalContainer.textContent = `Total: ₱${totalPrice}`;
              reservedItemsContainer.appendChild(totalContainer);
            });
          </script>
        </div>
      </div>
    </section><!-- End Shopping Cart Section -->

  </main><!-- End #main -->

  <!-- Editing Container -->
  <div id="editContainer">
    <span class="close-btn" onclick="document.getElementById('editContainer').style.display='none'">&times;</span>
    <h2>Edit Reservation</h2>
    <form>
      
      <label for="editQuantity">Quantity:</label>
      <input type="number" id="editQuantity" required>
      <label for="editDate">Claim Date:</label>
      <input type="date" id="editDate" placeholder="YYYY-MM-DD" required>
      <button type="button" onclick="saveEditedData()">Save</button>
    </form>
  </div>

  <!-- ======= Footer ======= -->

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>
